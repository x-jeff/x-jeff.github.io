---
layout:     post
title:      ã€è®¡ç®—æœºè§†è§‰ã€‘å›¾åƒåˆ†å‰²ä¹‹â€œæœ€å¤§æµ-æœ€å°å‰²â€ç®—æ³•
subtitle:   è®¡ç®—æœºè§†è§‰ï¼Œå›¾åƒåˆ†å‰²ï¼Œæœ€å¤§æµ-æœ€å°å‰²
date:       2018-10-26
author:     x-jeff
header-img: blogimg/20181026.jpg
catalog: true
tags:
    - Computer Vision
    - Image Segmentation
---  
>æœ¬æ–‡ä¸ºåŸåˆ›æ–‡ç« ï¼Œæœªç»æœ¬äººå…è®¸ï¼Œç¦æ­¢è½¬è½½ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

# 1.æœ€å¤§æµé—®é¢˜
![](https://ws3.sinaimg.cn/large/006tNbRwly1fwn6hglmr2j30s00eqjsv.jpg)
å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœèµ·ç‚¹ä¸ºSç‚¹ï¼Œç»ˆç‚¹ä¸ºTç‚¹ï¼Œæœ‰æ°´æµä»Sç‚¹æµå‘åˆ°Tç‚¹ã€‚å›¾ä¸­é»‘è‰²å¸¦ç®­å¤´çš„ç›´çº¿ä¸ºç®¡é“ï¼Œæ°´æµåªèƒ½æŒ‰ç…§ç®­å¤´çš„æ–¹å‘å‰è¿›ï¼Œå¾ˆæ˜æ˜¾ï¼Œä¸€ä¸ªç®¡é“ä¸­ä¸å¯èƒ½æœ‰ä¸¤ç§æ–¹å‘çš„æ°´æµã€‚â€œ/â€å‰çš„æ•°å­—è¡¨ç¤ºè¯¥æ¡ç®¡é“ç›®å‰çš„æµé‡ï¼Œâ€œ/â€åé¢çš„æ•°å­—è¡¨ç¤ºè¯¥æ¡ç®¡é“èƒ½æ‰¿è½½çš„æœ€å¤§æµé‡ã€‚æ°´æµä»Sç‚¹å‡ºå‘ï¼Œé›†ç»“åˆ°Tç‚¹ï¼ŒSç‚¹å‡ºå‘çš„æµå’Œè¿›å…¥Tç‚¹çš„æµåº”è¯¥æ˜¯ç›¸ç­‰çš„ã€‚**æœ€å¤§æµé—®é¢˜**å°±æ˜¯ä½¿æµå°½å¯èƒ½çš„å¤§ï¼ˆåœ¨æ»¡è¶³æ¯æ¡è¾¹å®¹é‡çš„é™åˆ¶ä¸‹ï¼‰ã€‚

è§£å†³æœ€å¤§æµé—®é¢˜é€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•ï¼š

* **å¢å¹¿è·¯å¾„ç®—æ³•ï¼ˆaugmenting pathsï¼‰**
* **é¢„æµæ¨è¿›ç®—æ³•ï¼ˆpush-relabelï¼‰**

æœ¬æ–‡ä¸»è¦ä»‹ç»å¢å¹¿è·¯å¾„ç®—æ³•ä»¥åŠGraph Cutå›¾å‰²ç®—æ³•ä¸­æ‰€ç”¨çš„æœ€å¤§æµ-æœ€å°å‰²ç®—æ³•ã€‚

# 2.å¢å¹¿è·¯å¾„ç®—æ³•
å¢å¹¿è·¯å¾„ç®—æ³•ä¸»è¦æœ‰ï¼š**Fold-Fulkersonç®—æ³•**ï¼Œ**Edmonds-Karpç®—æ³•**ï¼Œ**Dinicç®—æ³•**ç­‰ã€‚å…¶ä¸­ï¼ŒFold-Fulkerson æ˜¯æœ€åŸºæœ¬çš„å¢å¹¿è·¯å¾„æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯æœ¬åšå®¢è¦ä¸»è¦ä»‹ç»çš„ä¸€ç§ç®—æ³•ã€‚
## 2.1.åŸºæœ¬æœ¯è¯­
é€šå¸¸å°†ç¬¬1éƒ¨åˆ†ä¸­çš„é‚£å¼ å›¾ç§°ä¹‹ä¸º**å®¹é‡ç½‘ç»œ**ï¼Œå¯¹äºå®¹é‡ç½‘ç»œä¸­çš„ä¸€æ¡è¾¹$(u,v)$ï¼Œè¯¥è¾¹çš„ä¸Šé™ç§°ä¸º**å®¹é‡**ï¼Œè®°ä½œ$c(u,v)$ã€‚å®é™…**æµé‡**è®°ä½œ$f(u,v)$ã€‚

c(u,v)-f(u,v)ä¸ºå‰©ä½™çš„å®¹é‡ï¼Œä¹Ÿæˆä¸º**æ®‹é‡**ã€‚ä»»æ„æ—¶åˆ»ï¼Œå›¾ä¸­æ®‹é‡ä¸ä¸º0çš„è¾¹ç»„æˆçš„ç½‘ç»œè¢«ç§°ä¸º**æ®‹ä½™ç½‘ç»œ**ï¼Œè¯¥ç½‘ç»œä¸Šä»såˆ°tçš„è·¯å¾„è¢«ç§°ä¸º**å¢å¹¿è·¯å¾„**ã€‚

## 2.2.å¢å¹¿è·¯å¾„ç®—æ³•çš„ä¸»ä½“æ€æƒ³
ä¸æ–­åœ°ä»Sç‚¹å¼€å§‹å¯»æ‰¾å¢å¹¿è·¯å¾„ï¼Œæ¯æ¬¡éƒ½å¯¹å…¶è¿›è¡Œå¢å¹¿ï¼Œç›´åˆ°Sç‚¹å’ŒTç‚¹ä¸è¿é€šï¼ˆå› ä¸ºæ®‹ä½™ç½‘ç»œçš„è¾¹çš„æ®‹é‡å¦‚æœä¸º0åˆ™ä»æ®‹ä½™ç½‘ç»œä¸­åˆ å»è¿™æ¡è¾¹ï¼Œæ‰€ä»¥æœ€åä¼šé€ æˆSç‚¹å’ŒTç‚¹ä¸è¿é€šï¼‰ï¼Œä¹Ÿå°±æ˜¯æ‰¾ä¸åˆ°å¢å¹¿è·¯å¾„ä¸ºæ­¢ï¼ˆå› ä¸ºå¦‚æœSç‚¹å’ŒTç‚¹è¿é€šï¼Œå°±æ„å‘³ç€è¿˜å­˜åœ¨å¢å¹¿è·¯å¾„ï¼‰ã€‚å½“æ‰¾ä¸åˆ°å¢å¹¿è·¯å¾„çš„æ—¶å€™ï¼Œå½“å‰çš„æµé‡å°±æ˜¯æœ€å¤§æµã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹å¢å¹¿è·¯å¾„ç®—æ³•æ˜¯æ€ä¹ˆå®ç°çš„ï¼š

STEP1ï¼šå°†å®¹é‡ç½‘ç»œè½¬åŒ–æˆæ®‹ä½™ç½‘ç»œã€‚
![](https://ws2.sinaimg.cn/large/006tNbRwly1fwnpnock0yj30re0ekq43.jpg)

STEP2ï¼šæ‰¾åˆ°å¢å¹¿è·¯å¾„S$\rightarrow$A$\rightarrow$C$\rightarrow$Tã€‚
![](https://ws1.sinaimg.cn/large/006tNbRwly1fwnpy4wqzfj30q60dot9s.jpg)

STEP3ï¼šæ‰¾åˆ°å¢å¹¿è·¯å¾„S$\rightarrow$B$\rightarrow$D$\rightarrow$E$\rightarrow$Tã€‚
![](https://ws1.sinaimg.cn/large/006tNbRwly1fwnqm03lulj30re0ekt9u.jpg)

è‡³æ­¤ï¼Œæ‰¾ä¸åˆ°å…¶ä»–å¢å¹¿è·¯å¾„äº†ï¼Œæœ€å¤§æµä¸º3ï¼Œæœ€å¤§æµé—®é¢˜è§£å†³ã€‚

ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬åœ¨STEP2æ‰¾åˆ°çš„æ˜¯è·¯å¾„S$\rightarrow$B$\rightarrow$C$\rightarrow$Tï¼Œæ®‹ä½™ç½‘ç»œè§ä¸‹å›¾ï¼š
![](https://ws4.sinaimg.cn/large/006tNbRwly1fwnqunhkahj30r40eggmr.jpg)
ç„¶åä¸‹ä¸€æ­¥æ‰¾åˆ°è·¯å¾„S$\rightarrow$A$\rightarrow$C$\rightarrow$Tï¼š
![](https://ws4.sinaimg.cn/large/006tNbRwly1fwnr6a8mymj30rk0e60tw.jpg)
æ­¤æ—¶ï¼Œä¹Ÿæ»¡è¶³æ®‹ä½™ç½‘ç»œSç‚¹å’ŒTç‚¹ä¸è¿é€šï¼Œæ‰¾ä¸åˆ°å…¶ä»–å¢å¹¿è·¯å¾„ç­‰æ¡ä»¶ï¼Œä½†æ˜¯æœ€å¤§æµä¸º2ï¼Œè¿™ä¸ªç»“æœæ˜æ˜¾ä¸æ˜¯æœ€å¤§æµã€‚è¿™é‡Œï¼Œå¼•å…¥Fold-Fulkersonç®—æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## 2.3.Fold-Fulkersonç®—æ³•
Fold-Fulkersonç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å¼•å…¥åå‘è¾¹ï¼Œæ­£å‘è¾¹æµäº†kä¸ªå•ä½çš„æµé‡ï¼Œå…¶åå‘è¾¹çš„æ®‹é‡å¢åŠ kã€‚

STEP1ï¼šå¼•å…¥åå‘è¾¹ã€‚
![](https://ws3.sinaimg.cn/large/006tNbRwly1fwnuyhpo3yj30r00egwg7.jpg)

STEP2ï¼šæ‰¾åˆ°è·¯å¾„S$\rightarrow$B$\rightarrow$C$\rightarrow$Tã€‚
![](https://ws1.sinaimg.cn/large/006tNbRwly1fwnv0136w5j30rq0f6jt3.jpg)


STEP3ï¼šæ‰¾åˆ°è·¯å¾„S$\rightarrow$A$\rightarrow$C$\rightarrow$Tã€‚
![](https://ws3.sinaimg.cn/large/006tNbRwly1fwnv6fo5i3j30rc0ee75y.jpg)

STEP4ï¼šæ­£å‘è¾¹æ­¤æ—¶å·²ç»ä¸å­˜åœ¨å¢å¹¿è·¯å¾„ï¼Œä½†æ˜¯åœ¨å¼•å…¥åå‘è¾¹ä¹‹åï¼Œå‡ºç°äº†ä¸€æ¡æ–°çš„å¢å¹¿è·¯å¾„ï¼šS$\rightarrow$A$\rightarrow$C$\rightarrow$B$\rightarrow$D$\rightarrow$E$\rightarrow$Tã€‚
![](https://ws2.sinaimg.cn/large/006tNbRwly1fwnvb7l98wj30rm0esabp.jpg)

æ­¤æ—¶ï¼Œå½»åº•ä¸å­˜åœ¨å¢å¹¿è·¯å¾„ï¼Œæœ€å¤§æµä¸º3ï¼Œå¾—åˆ°çš„ç»“æœä¸2.2éƒ¨åˆ†æ­£ç¡®ç»“æœä¸€æ ·ã€‚

## 2.4.æœç´¢è·¯å¾„çš„æ–¹æ³•
ä¸»è¦æœ‰ä¸¤ç§æœç´¢æ–¹æ³•ï¼š**å®½åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰**å’Œ**æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰**ã€‚  
![](https://ws1.sinaimg.cn/large/006tNbRwly1fwperrf6ffj305w05i0t3.jpg)

* BFSï¼ˆå®½åº¦ä¼˜å…ˆæœç´¢ï¼Œå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰ï¼šå¦‚æœä»1å¼€å§‹è¿›è¡Œæœç´¢çš„è¯ï¼ŒBFSçš„æ­¥éª¤å°±æ˜¯ï¼Œå…ˆæœç´¢æ‰€æœ‰å’Œ1ç›¸è¿çš„ï¼Œä¹Ÿå°±æ˜¯2å’Œ5è¢«æ‰¾åˆ°äº†ï¼Œç„¶åå†ä»2å¼€å§‹æœç´¢å’Œä»–ç›¸è¿çš„ï¼Œä¹Ÿå°±æ˜¯3è¢«æ‰¾åˆ°äº†ï¼Œç„¶åä»5æœï¼Œä¹Ÿå°±æ˜¯4è¢«æ‰¾åˆ°äº†ï¼Œç„¶åä»3å¼€å§‹æœç´¢ï¼Œ4è¢«æ‰¾åˆ°äº†ï¼Œä½†æ˜¯4ä¹‹å‰å·²ç»è¢«5æ‰¾åˆ°äº†ï¼Œæ‰€ä»¥å¿½ç•¥æ‰å°±è¡Œã€‚ç„¶å3å¼€å§‹æœç´¢ï¼Œå¿½ç•¥4æ‰€ä»¥å•¥éƒ½æ²¡æœåˆ°ï¼Œç„¶åä»4å¼€å§‹ï¼Œ6è¢«æ‰¾åˆ°äº†ã€‚
* DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰ï¼šDFSçš„è¯ä»1å¼€å§‹ï¼Œå…ˆæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªç›¸è¿çš„ï¼Œ2è¢«æ‰¾åˆ°äº†ï¼Œç„¶åç›´æ¥å¼€å§‹ä»2å¼€å§‹æœç´¢ï¼Œ3è¢«æ‰¾åˆ°äº†ï¼Œç„¶åä»3å¼€å§‹æœç´¢ï¼Œ4è¢«æ‰¾åˆ°äº†ï¼Œç„¶åä»4å¼€å§‹æœç´¢ï¼Œ5è¢«æ‰¾åˆ°äº†ï¼Œç„¶åä»5å¼€å§‹æœç´¢ï¼Œå¿½ç•¥å·²ç»æ‰¾åˆ°çš„æ‰€ä»¥å•¥éƒ½æ²¡æ‰¾åˆ°ã€‚ç„¶åæ²¡è·¯å¯èµ°äº†ï¼Œå›åˆ°å‰é¢å»å†èµ°å¦ä¸€æ¡è·¯ï¼Œä»4å¼€å§‹ï¼Œ6è¢«æ‰¾åˆ°äº†ï¼Œç„¶ååˆæ²¡è·¯å¯èµ°äº†ï¼Œç„¶åå†å›å»å‰é¢4ï¼Œç„¶åæ²¡è·¯äº† ï¼Œå›å»å‰é¢3ï¼Œç„¶åä¸€ç›´è¿™æ ·ã€‚

Fold-Fulkersonç®—æ³•ä½¿ç”¨çš„æ˜¯DFSå¯»æ‰¾è·¯å¾„ã€‚

# 3.æœ€å¤§æµå’Œæœ€å°å‰²çš„å…³ç³»
**æœ€å¤§æµæœ€å°å‰²å®šç†**æ˜¯æŒ‡åœ¨ä¸€ä¸ªç½‘ç»œæµä¸­ï¼Œèƒ½å¤Ÿä»æºç‚¹ï¼ˆSç‚¹ï¼‰åˆ°è¾¾æ±‡ç‚¹ï¼ˆTç‚¹ï¼‰çš„æœ€å¤§æµé‡ç­‰äºå¦‚æœä»ç½‘ç»œä¸­ç§»é™¤å°±èƒ½å¤Ÿå¯¼è‡´ç½‘ç»œæµä¸­æ–­çš„è¾¹çš„é›†åˆçš„æœ€å°å®¹é‡å’Œã€‚å³åœ¨ä»»ä½•ç½‘ç»œä¸­ï¼Œæœ€å¤§æµçš„å€¼ç­‰äºæœ€å°å‰²çš„å®¹é‡ã€‚

ä¸€ä¸ªé‡è¦çš„ç›¸å…³å®šç†ï¼šå¦‚æœ*f*æ˜¯ç½‘ç»œä¸­çš„ä¸€ä¸ªæµï¼Œ*CUT(S,T)*æ˜¯ä»»æ„ä¸€ä¸ªå‰²ï¼Œé‚£ä¹ˆ*f*çš„å€¼ç­‰äºæ­£å‘å‰²è¾¹çš„æµé‡ä¸è´Ÿå‘å‰²è¾¹çš„æµé‡ä¹‹å·®ã€‚æ¢ç§è¯´æ³•å°±æ˜¯ï¼Œä»»æ„ä¸€ä¸ªæµå°äºç­‰äºä»»æ„ä¸€ä¸ªå‰²ã€‚

æœ€å¤§æµç­‰äºæœ€å°å‰²çš„è¯æ˜ï¼š  
è®¾ç›¸ç­‰çš„æµå’Œå‰²åˆ†åˆ«ä¸º$F_m$å’Œ$C_m$ã€‚åˆ™å› ä¸ºä»»æ„ä¸€ä¸ªæµå°äºç­‰äºä»»æ„ä¸€ä¸ªå‰²ã€‚$ä»»æ„Fâ‰¤F_m=C_mâ‰¤ä»»æ„C$ã€‚è¯æ˜å®Œæˆã€‚

æˆ‘ä»¬æ ¹æ®ä¹‹å‰çš„ä¾‹å­æ¥éªŒè¯ä¸€ä¸‹ï¼š
![](https://ws1.sinaimg.cn/large/006tNbRwly1fwpffmjcnuj30s00e675t.jpg)
å‰²çš„å‡€æµï¼š$f=f(C,T)-f(B,C)+f(S,B)=2-0+1=3=max-flow$

# 4.Graph Cutä¸­æ‰€ç”¨çš„æœ€å¤§æµ/æœ€å°å‰²ç®—æ³•
å…ˆé™„ä¸Šè®ºæ–‡åœ°å€å’ŒOpenCVä¸­çš„æºç åœ°å€ï¼š

è®ºæ–‡é“¾æ¥ğŸ‘‰[An Experimental Comparison of Min-Cut/Max-Flow Algorithms for Energy Minimization in Vision.](http://www1.spms.ntu.edu.sg/~image/meeting/paper_2008103101.pdf)

OpenCVæºç åœ°å€ğŸ‘‰[maxflow](https://github.com/opencv/opencv/blob/e628fd7bce2b5d64c36b5bdc55a37c0ae78bc907/modules/imgproc/include/opencv2/imgproc/detail/gcgraph.hpp)

Graph Cutä¸­æ‰€ç”¨çš„æœ€å¤§æµ/æœ€å°å‰²ç®—æ³•æ˜¯åœ¨Fold-Fulkersonç®—æ³•åŸºç¡€ä¸Šçš„æ”¹è¿›ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿå§ã€‚

>å…³äºGraph Cutç®—æ³•çš„è¯¦ç»†ä»‹ç»è¯·è§æœ¬äººçš„å¦ä¸€ç¯‡åšå®¢ï¼š[ã€è®¡ç®—æœºè§†è§‰ã€‘å›¾åƒåˆ†å‰²ä¹‹Graph Cutç®—æ³•](http://shichaoxin.com/2018/10/21/è®¡ç®—æœºè§†è§‰-å›¾åƒåˆ†å‰²ä¹‹Graph-Cutç®—æ³•/)




# 5.å‚è€ƒèµ„æ–™ï¼š
1.[ç½‘ç»œæµåˆæ­¥:\<æœ€å¤§æµ\>--æ ¸å¿ƒ\(å¢å¹¿è·¯ç®—æ³•\)](https://www.cnblogs.com/star-eternal/p/7616967.html)  

2.[ç®—æ³•å½•ä¹‹BFSå’ŒDFS](https://www.cnblogs.com/whywhy/p/4888632.html)  

3.[æœ€å¤§æµæœ€å°å‰²å®šç†ï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰](https://baike.baidu.com/item/æœ€å¤§æµæœ€å°å‰²å®šç†/3851799?fr=aladdin)