---
layout:     post
title:      ã€OpenCVåŸºç¡€ã€‘ç¬¬äº”è¯¾ï¼šå›¾åƒæ“ä½œ
subtitle:   è¯»å†™åƒç´ å€¼ï¼Œä¸/æˆ–/é/å¼‚æˆ–æ“ä½œï¼ŒROI
date:       2019-09-10
author:     x-jeff
header-img: blogimg/20190910.jpg
catalog: true
tags:
    - OpenCV Series
---
>æœ¬æ–‡ä¸ºåŸåˆ›æ–‡ç« ï¼Œæœªç»æœ¬äººå…è®¸ï¼Œç¦æ­¢è½¬è½½ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

# 1.è¯»å–åƒç´ å€¼

åœ¨[ã€OpenCVåŸºç¡€ã€‘ç¬¬ä¸‰è¯¾ï¼šæ©è†œæ“ä½œ](http://shichaoxin.com/2019/06/02/OpenCVåŸºç¡€-ç¬¬ä¸‰è¯¾-æ©è†œæ“ä½œ/)ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`mat.ptr<uchar>()`è·å–å›¾åƒæŸä¸€è¡Œåƒç´ æ•°ç»„çš„æŒ‡é’ˆã€‚å› æ­¤å¦‚æœæƒ³è¦è¯»å–ç‚¹(x=50ï¼Œy=0)ï¼ˆâš ï¸å³(row=0,col=50)ï¼‰çš„åƒç´ å€¼ï¼Œå¯ä»¥è¿™æ ·åšï¼š`mat.ptr<uchar>(0)[50]`ã€‚

åœ¨æœ¬èŠ‚å°†ä»‹ç»å¦å¤–å‡ ç§ç›´æ¥è¯»å–åƒç´ å€¼çš„æ–¹æ³•ã€‚

## 1.1.è¯»å–ç°åº¦å›¾çš„åƒç´ å€¼

ğŸ‘‰æ–¹æ³•ä¸€ï¼š

~~~c++
Scalar intensity1=img.at<uchar>(y,x);
int intensity2=img.at<uchar>(y,x);
~~~

ğŸ“Œ`Scalar`æ˜¯ä¸€ä¸ªç”±**é•¿åº¦ä¸º4çš„æ•°ç»„**ä½œä¸ºå…ƒç´ æ„æˆçš„ç»“æ„ä½“ã€‚`Scalar`æœ€å¤šå¯ä»¥å­˜å‚¨å››ä¸ªå€¼ï¼Œ**æ²¡æœ‰æä¾›çš„å€¼é»˜è®¤æ˜¯0**ã€‚ä¾‹å¦‚ä¸Šè¿°ä»£ç ä¸­intensity1=[49,0,0,0]ã€‚

å› ä¸ºç°åº¦å›¾åƒæ˜¯å•é€šé“ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç”¨`int`å‹ã€‚ä¾‹å¦‚ä¸Šè¿°ä»£ç ä¸­intensity2=49ã€‚

ğŸ‘‰æ–¹æ³•äºŒï¼š

```c++
Scalar intensity3=img.at<uchar>(Point(x,y));
```

## 1.2.è¯»å–RGBå›¾åƒçš„åƒç´ å€¼

~~~c++
Vec3b pnt1=img.at<Vec3b>(y,x);//ä¾‹å¦‚[39, 41, 51]
Scalar pnt2=img.at<Vec3b>(y,x);//ä¾‹å¦‚[39, 41, 51, 0]
Vec3b pnt3=img.at<uchar>(y,x);//è‡ªåŠ¨è½¬æ¢æˆç°åº¦å€¼ï¼Œä¾‹å¦‚[49,0,0]
~~~

`Vec3b`çš„å®šä¹‰ä¸º`typedef Vec<uchar,3> Vec3b`

ç±»ä¼¼çš„è¿˜æœ‰ï¼Œ`Vec3f`çš„å®šä¹‰ä¸º`typedef Vec<float, 3> Vec3f`

### 1.2.1.è¯»å–å„ä¸ªé€šé“çš„äº®åº¦å€¼

* B
	* `int blue=pnt1.val[0];`
	* `int blue=img.at<Vec3b>(y,x)[0];`
* G
	* `int green=pnt1.val[1];`
	* `int green=img.at<Vec3b>(y,x)[1];`
* R
	* `int red=pnt1.val[2];`
	* `int red=img.at<Vec3b>(y,x)[2]`

# 2.ä¿®æ”¹åƒç´ å€¼

## 2.1.ç°åº¦å›¾åƒ

```c++
img.at<uchar>(y,x)=128;
```

## 2.2.RGBå›¾åƒ

```c++
img.at<Vec3b>(y,x)[0]=128;//blue
img.at<Vec3b>(y,x)[1]=128;//green
img.at<Vec3b>(y,x)[2]=128;//red
```

# 3.å›¾åƒçš„â€œä¸ã€æˆ–ã€éã€å¼‚æˆ–â€æ“ä½œ

1. `bitwise_and`æ˜¯å¯¹**äºŒè¿›åˆ¶æ•°æ®**è¿›è¡Œâ€œä¸â€æ“ä½œï¼Œå³å¯¹å›¾åƒï¼ˆç°åº¦å›¾åƒæˆ–å½©è‰²å›¾åƒå‡å¯ï¼‰æ¯ä¸ªåƒç´ å€¼è¿›è¡ŒäºŒè¿›åˆ¶â€œä¸â€æ“ä½œï¼Œ$1\&1=1,1\&0=0,0\&1=0,0\&0=0$ã€‚
2. `bitwise_or`æ˜¯å¯¹**äºŒè¿›åˆ¶æ•°æ®**è¿›è¡Œâ€œæˆ–â€æ“ä½œï¼Œå³å¯¹å›¾åƒï¼ˆç°åº¦å›¾åƒæˆ–å½©è‰²å›¾åƒå‡å¯ï¼‰æ¯ä¸ªåƒç´ å€¼è¿›è¡ŒäºŒè¿›åˆ¶â€œæˆ–â€æ“ä½œï¼Œ$1\mid 1=1,1\mid 0=1,0\mid 1=1,0\mid 0=0$ã€‚
3. `bitwise_xor`æ˜¯å¯¹**äºŒè¿›åˆ¶æ•°æ®**è¿›è¡Œâ€œå¼‚æˆ–â€æ“ä½œï¼Œå³å¯¹å›¾åƒï¼ˆç°åº¦å›¾åƒæˆ–å½©è‰²å›¾åƒå‡å¯ï¼‰æ¯ä¸ªåƒç´ å€¼è¿›è¡ŒäºŒè¿›åˆ¶â€œå¼‚æˆ–â€æ“ä½œï¼Œ$1^\wedge 1=0,1^\wedge 0=1,0^\wedge 1=1,0^\wedge 0=0$ã€‚
4. `bitwise_not`æ˜¯å¯¹**äºŒè¿›åˆ¶æ•°æ®**è¿›è¡Œâ€œéâ€æ“ä½œï¼Œå³å¯¹å›¾åƒï¼ˆç°åº¦å›¾åƒæˆ–å½©è‰²å›¾åƒå‡å¯ï¼‰æ¯ä¸ªåƒç´ å€¼è¿›è¡ŒäºŒè¿›åˆ¶â€œéâ€æ“ä½œï¼Œ$\sim 1=0,\sim 0=1$ã€‚

# 4.å›¾åƒROIåŒºåŸŸçš„é€‰æ‹©

é™å®šROI(region of interest)çš„ä½ç½®å’Œå¤§å°å¯ä»¥ç”¨ï¼š`Rect r(x,y,x_length,y_length)`ã€‚ä¾‹å¦‚ï¼š

```c++
Rect r(10,10,100,100);//cv::Rect
Mat dst=img(r);
```

# 5.ä»£ç åœ°å€

1. [å›¾åƒæ“ä½œ](https://github.com/x-jeff/OpenCV_Code_Demo/tree/master/Demo5)

# 6.å‚è€ƒèµ„æ–™

1. [ã€Pythonâ€”â€”opencvç¯‡ã€‘ bitwise\_andã€bitwise\_notç­‰å›¾åƒåŸºæœ¬è¿ç®—åŠæ©è†œ](https://blog.csdn.net/Lily_9/article/details/83143120)