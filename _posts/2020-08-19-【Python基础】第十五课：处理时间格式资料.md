---
layout:     post
title:      ã€PythonåŸºç¡€ã€‘ç¬¬åäº”è¯¾ï¼šå¤„ç†æ—¶é—´æ ¼å¼èµ„æ–™
subtitle:   datetime
date:       2020-08-19
author:     x-jeff
header-img: blogimg/20200819.jpg
catalog: true
tags:
    - Python Series
---
>æœ¬æ–‡ä¸ºåŸåˆ›æ–‡ç« ï¼Œæœªç»æœ¬äººå…è®¸ï¼Œç¦æ­¢è½¬è½½ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

# 1.å¤„ç†æ—¶é—´æ ¼å¼èµ„æ–™

ğŸ‘‰è·å–ç°åœ¨çš„æ—¶é—´ï¼š

```python
from datetime import datetime
current_time = datetime.now()#è¾“å‡ºä¸ºï¼š2020-08-19 22:09:47.804580
```

é€šè¿‡`type(current_time)`æŸ¥çœ‹current_timeçš„æ ¼å¼ä¸ºï¼š`<class 'datetime.datetime'>`ï¼Œå¹¶ä¸æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ ¼å¼ã€‚

ğŸ‘‰å°†æ—¶é—´è½¬æ¢æˆå­—ç¬¦ä¸²ï¼š

```python
current_time.strftime('%Y-%m-%d')#è¾“å‡ºä¸ºï¼š2020-08-19
```

ğŸ‘‰å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ—¶é—´ï¼š

```python
datetime.strptime('2020-08-19', '%Y-%m-%d')#è¾“å‡ºä¸ºï¼š2020-08-19 00:00:00
```

ğŸš©pythonä¸­æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–ç¬¦å·ï¼ˆğŸ”—[å®˜æ–¹è¯´æ˜](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior)ï¼‰ï¼š

* `%y`ï¼šä¸¤ä½æ•°çš„å¹´ä»½è¡¨ç¤ºï¼ˆ00-99ï¼‰ã€‚
* `%Y`ï¼šå››ä½æ•°çš„å¹´ä»½è¡¨ç¤ºï¼ˆ000-9999ï¼‰ã€‚
* `%m`ï¼šæœˆä»½ï¼ˆ01-12ï¼‰ã€‚
* `%d`ï¼šæœˆå†…ä¸­çš„ä¸€å¤©ï¼ˆ0-31ï¼‰ã€‚
* `%H`ï¼š24å°æ—¶åˆ¶å°æ—¶æ•°ï¼ˆ0-23ï¼‰ã€‚
* `%I`ï¼š12å°æ—¶åˆ¶å°æ—¶æ•°ï¼ˆ01-12ï¼‰ã€‚
* `%M`ï¼šåˆ†é’Ÿæ•°ï¼ˆ00-59ï¼‰ã€‚
* `%S`ï¼šç§’ï¼ˆ00-59ï¼‰ã€‚
* `%a`ï¼šæœ¬åœ°ç®€åŒ–æ˜ŸæœŸåç§°ï¼Œä¾‹å¦‚ï¼š`Wed`ã€‚
* `%A`ï¼šæœ¬åœ°å®Œæ•´æ˜ŸæœŸåç§°ï¼Œä¾‹å¦‚ï¼š`Wednesday`ã€‚
* `%b`ï¼šæœ¬åœ°ç®€åŒ–çš„æœˆä»½åç§°ï¼Œä¾‹å¦‚ï¼š`Aug`ã€‚
* `%B`ï¼šæœ¬åœ°å®Œæ•´çš„æœˆä»½åç§°ï¼Œä¾‹å¦‚ï¼š`August`ã€‚
* `%c`ï¼šæœ¬åœ°ç›¸åº”çš„æ—¥æœŸè¡¨ç¤ºå’Œæ—¶é—´è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š`Wed Aug 19 22:25:13 2020`ã€‚
* `%j`ï¼šå¹´å†…çš„ä¸€å¤©ï¼ˆ001-366ï¼‰ã€‚
* `%p`ï¼šæœ¬åœ°A.M.æˆ–P.M.çš„ç­‰ä»·ç¬¦ï¼Œä¾‹å¦‚ï¼š`PM`ã€‚
* `%U`ï¼šä¸€å¹´ä¸­çš„æ˜ŸæœŸæ•°ï¼ˆ00-53ï¼‰æ˜ŸæœŸå¤©ä¸ºæ˜ŸæœŸçš„å¼€å§‹ã€‚
* `%w`ï¼šæ˜ŸæœŸï¼ˆ0-6ï¼‰ï¼Œæ˜ŸæœŸå¤©ä¸ºæ˜ŸæœŸçš„å¼€å§‹ã€‚
* `%W`ï¼šä¸€å¹´ä¸­çš„æ˜ŸæœŸæ•°ï¼ˆ00-53ï¼‰æ˜ŸæœŸä¸€ä¸ºæ˜ŸæœŸçš„å¼€å§‹ã€‚
* `%x`ï¼šæœ¬åœ°ç›¸åº”çš„æ—¥æœŸè¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š`08/19/20`ã€‚
* `%X`ï¼šæœ¬åœ°ç›¸åº”çš„æ—¶é—´è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š`22:28:10`ã€‚
* `%Z`ï¼šå½“å‰æ—¶åŒºçš„åç§°ã€‚
* `%%`ï¼š%å·æœ¬èº«ã€‚

# 2.æ—¶é—´å›æº¯

ğŸ‘‰æ—¶é—´å¾€å‰å›æº¯ä¸€å¤©ï¼š

```python
from datetime import timedelta
current_time - timedelta(days=1)#è¾“å‡ºä¸ºï¼š2020-08-18 22:43:58.022801
```

ğŸ‘‰æ—¶é—´å¾€åæ¨ç§»åå¤©ï¼š

```python
from datetime import timedelta
current_time - timedelta(days=-10)#è¾“å‡ºä¸ºï¼š2020-08-29 22:48:33.314726
```

ä¹Ÿå¯å†™ä¸ºï¼š

```python
current_time + timedelta(days=10)
```

# 3.è½¬æ¢UNIXæ—¶é—´

**UNIXæ—¶é—´**ï¼ˆæˆ–ç§°**POSIXæ—¶é—´**ï¼‰æ˜¯UNIXæˆ–ç±»UNIXç³»ç»Ÿä½¿ç”¨çš„æ—¶é—´è¡¨ç¤ºæ–¹å¼ï¼šä»UTC1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ï¼Œä¸è€ƒè™‘é—°ç§’ã€‚

ğŸ‘‰å°†datetimeè½¬æ¢ä¸ºUNIX timestampï¼š

```python
from time import mktime
mktime(current_time.timetuple())#è¾“å‡ºä¸ºï¼š1597849302.0
```

å…¶ä¸­`current_time.timetuple()`çš„è¾“å‡ºæ ¼å¼ä¸ºï¼š

```
time.struct_time(tm_year=2020, tm_mon=8, tm_mday=19, tm_hour=23, tm_min=4, tm_sec=27, tm_wday=2, tm_yday=232, tm_isdst=-1)
```

ğŸ‘‰å°†UNIX timestampè½¬æ¢ä¸ºdatetimeï¼š

```python
datetime.fromtimestamp(1597849076)#è¾“å‡ºä¸ºï¼š2020-08-19 22:57:56
```

# 4.åœ¨pandasè½¬æ¢æ—¶é—´

æˆ‘ä»¬ä»¥ä¸Šä¸€è¯¾ï¼š[ã€PythonåŸºç¡€ã€‘ç¬¬åå››è¯¾ï¼šèµ„æ–™è½¬æ¢](http://shichaoxin.com/2020/07/08/PythonåŸºç¡€-ç¬¬åå››è¯¾-èµ„æ–™è½¬æ¢/)ä¸­ä½¿ç”¨çš„csvæ–‡ä»¶ä¸ºä¾‹ï¼Œå°†â€œæ—¥æœŸâ€ä¸€æ çš„æ ¼å¼æ”¹ä¸ºdatetimeï¼š

```python
import pandas as pd
df = pd.read_csv("../Demo14/house_price.csv")
df["æ—¥æœŸ"] = pd.to_datetime(df["æ—¥æœŸ"], format="%Yå¹´%mæœˆ%dæ—¥")
```

>csvæ–‡ä»¶åœ°å€ï¼š[é“¾æ¥](https://github.com/x-jeff/Python_Code_Demo/blob/master/Demo14/house_price.csv)ã€‚

# 5.ä»£ç åœ°å€

1. [å¤„ç†æ—¶é—´æ ¼å¼èµ„æ–™](https://github.com/x-jeff/Python_Code_Demo/tree/master/Demo15)

# 6.å‚è€ƒèµ„æ–™

1. [Python time strftime()æ–¹æ³•ï¼ˆèœé¸Ÿæ•™ç¨‹ï¼‰](https://www.runoob.com/python/att-time-strftime.html)
2. [UNIXæ—¶é—´ï¼ˆWIKIï¼‰](https://zh.wikipedia.org/wiki/UNIX%E6%97%B6%E9%97%B4)
