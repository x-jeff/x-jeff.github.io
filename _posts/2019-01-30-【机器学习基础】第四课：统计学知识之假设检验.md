---
layout:     post
title:      【机器学习基础】第四课：统计学知识之假设检验
subtitle:   t检验，方差分析，卡方检验，秩检验
date:       2019-01-30
author:     x-jeff
header-img: blogimg/20190130.jpg
catalog: true
tags:
    - Machine Learning Series
---
>【机器学习基础】系列博客为参考周志华老师的《机器学习》一书，自己所做的读书笔记。  
>本文为原创文章，未经本人允许，禁止转载。转载请注明出处。

# 1.比较检验

先使用某种实验评估方法测得学习器的某个性能度量结果，然后对结果进行比较，不能单纯地直接取得性能度量的值然后“比”大小，需要有**统计学意义**。

在现实任务中我们并不知道学习器的泛化错误率，只能获知其测试错误率。因此本文以测试错误率作为性能度量。

# 2.假设检验

关于假设检验（以单样本t检验为例，样本均数为$\mu_0$，总体均数为$\mu$）:

1. $\mu=\mu_0$：即检验假设，常称无效假设或零（原）假设，用$H_0$表示。
2. $\mu\neq \mu_0$（或$\mu>\mu_0$，$\mu<\mu_0$等）：即备择假设，常称对立假设，用$H_1$或$H_A$表示。

除此之外，还需要注意：

* 检验假设针对的是总体，而不是样本。
* $H_0$为无效假设，其假定通常是：某两个（或多个）总体参数相等，或两个总体参数之差为0，或某资料服从某一特定分布（如正态分布，泊松分布）或某些情况无效等。
* 不拒绝$H_0$不等于接受$H_0$。下结论时，对$H_0$只能说拒绝$H_0$或不拒绝$H_0$，而对$H_1$只能说接受$H_1$，除此之外的其他说法均不妥当。

假设检验常用的有两大类：

1. 参数检验（*parametric test*）
2. 非参数检验（*nonparametric test*）

## 2.1.参数检验

如果总体分布为已知的数学形式，对其总体参数做假设检验称为**参数检验**。

例如：**t检验**和**F检验**。

⚠️使用t检验和F检验的两个前提条件：1）正态分布总体；2）方差齐性。

## 2.2.非参数检验

但是：

* 当总体分布不能由已知的数学形式表达，没有总体参数时，不能使用参数检验。
* 两个或多个正态总体方差不等时，不能对其总体均数进行t检验或F检验的参数检验。

对于这种情况，有两种解决办法：**一是**可尝试变量变换使其满足参数检验条件，但不一定能成功；**二是**使用非参数检验。对于等级资料，常使用非参数检验。

**非参数检验**对总体分布不作严格假定，又称**任意分布检验**。例如：**秩检验**和**卡方检验**。

# 3.参数检验之t检验

先补充两方面的知识：

👉**标准误：**

通常，将**样本统计量**的标准差称为**标准误**。

样本均数的标准差称为均数的标准误，即

$$\sigma_{\bar x}=\frac{\sigma}{\sqrt{n}}$$

其中，$\sigma_{\bar x}$为均数标准误，$\sigma$为总体标准差，$n$为样本量。

>总体标准差和样本标准差：
>
>总体标准差：$\sigma=\sqrt{\frac{\sum (x-\mu)^2}{N}}$
>
>样本标准差：$S=\sqrt{\frac{\sum (x-\bar x)^2}{n-1}}$
>
>数理统计证明：若用样本个数n代替N，计算出的样本方差对$\sigma ^2$的估计偏小，需将n用n-1代替。

在实际工作中，由于总体标准差$\sigma$常常未知，而用样本标准差S来估计，因此均数标准误的估计值为:

$$S_{\bar x}=\frac{S}{\sqrt{n}}$$

👉**t分布：**

若某一随机变量$X$服从总体均数为$\mu$，总体标准差为$\sigma$的正态分布$N(\mu,\sigma ^2)$，则通过$u$变换（$\frac{X-\mu}{\sigma}$，也称$Z$变换）可将一般正态分布转化为标准正态分布$N(0,1^2)$，即$u$分布（也称$Z$分布）。

同理，若样本含量为$n$的样本均数$\bar X$服从总体均数为$\mu$，总体标准差为$\sigma_{\bar X}$的正态分布$N(\mu ,\sigma_{\bar X}^2)$，则通过同样方式的$u$变换$(\frac{\bar X-\mu}{\sigma_{\bar X}})$也可将其转换为标准正态分布$N(0,1^2)$，即$u$分布。

但在实际工作中，$\sigma_{\bar X}$常常未知，用$S_{\bar X}$代替，则$\frac{\bar X-\mu}{S_{\bar X}}$不再服从标准正态分布，而服从**t分布**。即

$$t=\frac{\bar X-\mu}{S_{\bar X}}=\frac{\bar X-\mu}{S/\sqrt n},v=n-1$$

>**自由度：**  
>上式中$v$为自由度。在数学上指能够自由取值的变量个数。  
>如$X+Y+Z=18$，有三个变量，但能够自由取值的只有两个，故自由度$v=2$，在统计学中自由度通常按下式计算：$v=n-m$。其中，$n$为计算某一统计量时用到的数据个数；$m$为计算该统计量时用到其他独立统计量的个数。

t分布图形与特征（概率分布曲线）：
![](https://ws1.sinaimg.cn/large/006tNc79ly1g03v4hlz9oj311m0hs46h.jpg)

t分布图有如下特征：

* 单峰分布，以0为中心，左右对称；
* t分布的曲线形态取决于自由度$v$的大小，自由度$v$越小，则t值越分散，曲线的峰部越矮而尾部翘得越高；
* 当$v$逼近$\infty$，$S_{\bar X}$逼近$\sigma_{\bar x}$，t分布逼近标准正态分布。当自由度趋于$\infty$时，t分布就是标准正态分布，故标准正态分布就是t分布的特例。

## 3.1.单样本t检验

单样本t检验即已知样本均数$\bar X$(代表未知总体均数$\mu$)与已知总体均数$\mu_0$（一般为理论值、标准值或经过大量观察所得的稳定值等）的比较。公式见下：

$$t=\frac{\bar X-\mu}{S_{\bar X}}=\frac{\bar X-\mu}{S/\sqrt n}=\frac{\bar X-\mu_0}{S/\sqrt n},v=n-1$$

## 3.2.配对样本t检验

公式见下（若两种处理效应相同）：

$$t=\frac{\bar d-\mu_d}{S_{\bar d}}=\frac{\bar d-0}{S_d/\sqrt n}=\frac{\bar d}{S_d/\sqrt n},v=n-1$$

其中，$d$为每对数据的差值，$\bar d$为差值的样本均数，$S_d$为差值的标准差，$S_{\bar d}$差值样本均数的标准误，$n$为对子数。

### 3.2.1.配对样本t检验的应用场景举例

对于两个学习器$A$和$B$，若使用$k$折交叉验证法得到的测试错误率分别为$\epsilon_1^A,\epsilon_2^A,...,\epsilon_k^A$和$\epsilon_1^B,\epsilon_2^B,...,\epsilon_k^B$，其中$\epsilon_i^A$和$\epsilon_i^B$是在**相同**的第$i$折训练/测试集上得到的结果。此时便可采用配对样本t检验对学习器A和B进行比较。

⚠️但是欲进行有效的假设检验，一个重要前提是测试错误率均为泛化错误率的独立采样。⚠️

# X.参考资料

1. 《医学统计学（第4版）》（人民卫生出版社，主编：孙振球，徐勇勇）

# 未完待续....